(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(15),c=n.n(o),a=n(6),i=n(3),u=n(4),s=n.n(u),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},create:function(e){return s.a.post(l,e).then((function(e){return e.data}))},update:function(e,t){return s.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},f=n(0),b=function(e){var t=e.filter,n=e.setNewFilter;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},j=function(e){var t=e.addPerson,n=e.newName,r=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:n,onChange:r})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:o,onChange:c})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.person,n=e.onDeleteClick;return Object(f.jsxs)("p",{children:[t.name," ",t.number," ",Object(f.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name," ?"))&&n(t.id)},children:"Delete"})]})},m=function(e){var t=e.persons,n=e.filterValue,r=e.onDeleteClick;return t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})).map((function(e){return Object(f.jsx)(h,{person:e,onDeleteClick:r},e.id)}))},p=function(e){var t=e.message;if(null===t||!t.text)return null;return Object(f.jsx)("div",{style:"error"===t.type?{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t.text})},O=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),u=Object(i.a)(c,2),s=u[0],l=u[1],h=Object(r.useState)(""),O=Object(i.a)(h,2),x=O[0],g=O[1],v=Object(r.useState)(""),w=Object(i.a)(v,2),y=w[0],C=w[1],k=Object(r.useState)({text:"",type:""}),N=Object(i.a)(k,2),S=N[0],D=N[1];Object(r.useEffect)((function(){d.getAll().then((function(e){o(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(p,{message:S}),Object(f.jsx)(b,{filter:y,setNewFilter:C}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(j,{addPerson:function(e){if(e.preventDefault(),n.some((function(e){return e.name===s}))){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===s}));!function(e,t){d.update(e,t).then((function(t){o(n.map((function(n){return n.id!==e?n:t}))),l(""),g(""),D({type:"info",text:"".concat(t.name,"'s number was updated")}),setTimeout((function(){D(null)}),5e3)})).catch((function(r){"404"==r.response.status?(D({type:"error",text:"Information of ".concat(t.name," has already been removed from server")}),o(n.filter((function(t){return t.id!==e}))),setTimeout((function(){D(null)}),5e3)):(D({type:"error",text:r.response.data.error}),setTimeout((function(){D(null)}),5e3))}))}(t.id,Object(a.a)(Object(a.a)({},t),{},{number:x}))}}else{var r={name:s,number:x};d.create(r).then((function(e){o(n.concat(e)),l(""),g(""),D({type:"info",text:"Added ".concat(e.name)}),setTimeout((function(){D(null)}),5e3)})).catch((function(e){D({type:"error",text:e.response.data.error}),setTimeout((function(){D(null)}),5e3)}))}},newName:s,handleNameChange:function(e){l(e.target.value)},newNumber:x,handleNumberChange:function(e){g(e.target.value)}}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(m,{persons:n,filterValue:y,onDeleteClick:function(e){d.remove(e).then(o(n.filter((function(t){return t.id!==e}))))}})]})};c.a.render(Object(f.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.4bb4eccb.chunk.js.map